<div class="flex flex-col h-full w-full bg-white rounded-lg shadow p-8">
  <h1 class="text-2xl font-bold text-gray-800 mb-4">Historia produktu</h1>
  <form class="flex gap-4 mb-6" (ngSubmit)="fetchHistory()">
    <input [(ngModel)]="uuid" name="uuid" placeholder="Podaj UUID produktu"
      class="bg-gray-100 rounded-lg px-4 py-2 placeholder-gray-400 font-semibold flex-1" required />
    <button type="submit"
      class="bg-orange-600 text-white font-semibold px-6 py-2 rounded-lg shadow hover:bg-orange-700 transition cursor-pointer">
      Pokaż historię
    </button>
  </form>
  @if (loading) {
    <div class="text-gray-500 text-center py-8">Ładowanie...</div>
  }
  <div class="flex flex-col gap-4">
    @for (entry of history; let i = $index; track entry.id) {
      <div class="bg-white rounded-2xl shadow-lg p-6 flex flex-col border border-gray-200 min-h-[120px]">
        <div class="flex flex-col md:flex-row gap-4">
          <div class="flex-1">
            <div class="flex flex-wrap items-center gap-x-8 gap-y-2 mb-2">
              <span class="text-xl font-bold text-orange-700">{{entry.product.name}}</span>
              <span class="ml-2 text-xs text-gray-400 font-mono">UUID: {{entry.product.uuid}}</span>
              <span class="text-gray-600 text-sm font-mono">RFID: {{entry.product.rfid}}</span>
            </div>
            <div class="flex flex-wrap items-center gap-x-8 gap-y-2 mb-2">
              <span class="text-gray-600 text-sm font-semibold">Kategoria: <span class="font-normal">{{entry.product.category.name}}</span></span>
              <span class="text-gray-600 text-sm font-semibold">Kontrahent: <span class="font-normal">{{entry.product.contractor}}</span></span>
            </div>
            <div class="flex flex-wrap items-center gap-x-8 gap-y-2 mb-2">
              <span class="text-gray-600 text-sm font-semibold">Lokalizacja:
                <span class="font-normal">
                  {{entry.product.spot.shelf.hall.name}},
                  {{entry.product.spot.shelf.name}},
                  {{entry.product.spot.name}}
                </span>
              </span>
            </div>
          </div>
          <div class="flex flex-col items-end min-w-[180px]">
            <span class="text-gray-700 text-sm font-semibold mb-1">Akcja: <span class="font-normal">{{entry.actionType}}</span></span>
            <span class="text-gray-700 text-sm font-semibold mb-1">Użytkownik: <span class="font-normal">{{entry.user}}</span></span>
            <span class="text-xs text-gray-400">Data: {{entry.created_at | date:'yyyy-MM-dd HH:mm:ss'}}</span>
          </div>
        </div>
      </div>
    }
    @if (history.length === 0 && !loading) {
      <div class="px-4 py-8 text-center text-gray-500 bg-gray-50 rounded-xl shadow">Brak historii dla podanego produktu</div>
    }
  </div>
</div>
